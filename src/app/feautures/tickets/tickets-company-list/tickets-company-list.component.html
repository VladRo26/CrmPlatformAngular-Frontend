<p-table [value]="tickets" [tableStyle]="{'min-width': '60rem'}" *ngIf="!loading">
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Handler</th>
        <th>Actions</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ticket>
      <tr>
        <td>{{ ticket.id }}</td>
        <td>{{ ticket.title }}</td>
        <td>{{ ticket.status }}</td>
        <td>{{ ticket.priority }}</td>
        <td>
          <div *ngIf="ticket.handlerId">
            <img
            [src]="handlers[ticket.handlerId]?.photoUrl || '/user.png'"
            alt="Handler Photo"
            class="handler-photo"
            />
            <span>{{ handlers[ticket.handlerId]?.userName }}</span>
          </div>
          <div *ngIf="!ticket.handlerId">Unassigned</div>
        </td>
        <td>
          <button
            class="btn btn-primary"
            [disabled]="!!ticket.handlerId"
            (click)="takeOverTicket(ticket.id)"
          >
            Take Over
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  
  <p *ngIf="!loading && tickets.length === 0">No tickets found.</p>
  